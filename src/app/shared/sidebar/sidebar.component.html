<aside class="flex h-full w-full flex-col bg-gray-800">
  <!-- Logo/Brand -->
  <div
    class="flex h-14 flex-shrink-0 items-center justify-center border-b border-gray-700 bg-gray-900 sm:h-16">
    <span class="text-lg font-bold tracking-wider text-white sm:text-xl">HRMS</span>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 overflow-y-auto px-3 py-4" (click)="onNavClick()">
    @if (menuService.loading()) {
      <!-- Loading skeleton -->
      <div class="space-y-2">
        @for (i of [1,2,3,4,5]; track i) {
          <div
            class="h-12 animate-pulse rounded-lg bg-gray-700"
            [style.animation-delay.ms]="i * 80">
          </div>
        }
      </div>
    } @else if (menuService.error()) {
      <!-- Error state with retry -->
      <div class="rounded-lg border border-amber-500/50 bg-amber-500/10 px-4 py-3 text-sm text-amber-200">
        <p class="font-medium">Could not load menu</p>
        <p class="mt-1 opacity-90">{{ menuService.error() }}</p>
        <button
          type="button"
          (click)="menuService.fetchMenus().subscribe()"
          class="mt-2 rounded bg-amber-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-amber-500">
          Retry
        </button>
      </div>
    } @else if (menuService.menus().length === 0) {
      <!-- No menu items (e.g. role has no access) -->
      <div class="px-4 py-3 text-sm text-gray-400">
        No menu items available.
      </div>
    } @else {
      <!-- Dynamic menu tree -->
      <div class="space-y-1">
        @for (item of menuService.menus(); track item.menuId) {
          <app-menu-item [item]="item" [depth]="0"></app-menu-item>
        }
      </div>
    }
  </nav>
</aside>
